# /etc/init/play-helloworld.conf

description "play framework instance of <%= @service_name %> application"
author      "Nate Warren"
start on runlevel [2345]
stop on runlevel [!2345]

setuid play
setgid play

env APP_NAME=<%= @app_name %>
env APP_HOME=<%= @path %>/apps/<%= @app_name %>-<%= @version %>
env PORT=<%= @port %>
env PID_FILE=<%= @path %>/pids/<%= @service_name %>-<%= @port %>.pid
env CONFIG=<%= @path %>/conf/<%= @service_name %>.conf
env LOGGER_CONFIG=<%= @path %>/conf/logger-conf.xml
env LOGFILE=<%= path %>/logs/<%= @app_name %>-<%= @port %>
env EXTRA="<%= @exec_params %>"

respawn
respawn limit 10 5

pre-start script
  if [ -f $PID_FILE ] && ! ps -p `cat $PID_FILE` > /dev/null; then
	rm $PID_FILE ;
  fi
end script

console output

exec $APP_HOME/bin/$APP_NAME -Dpidfile.path=$PID_FILE -Dconfig.file=$CONFIG -Dlogger.file=$LOGGER_CONFIG -Dlogger_filename=$LOGFILE -Dhttp.port=$PORT  $EXTRA

